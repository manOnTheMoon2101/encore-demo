import { executionAsyncResource, createHook } from "node:async_hooks";
// Private symbol to avoid pollution
const sym = Symbol("request");
createHook({
    init(asyncId, type, triggerAsyncId, resource) {
        const cr = executionAsyncResource();
        if (cr) {
            resource[sym] = cr[sym];
        }
    }
}).enable();
export function setCurrentRequest(req) {
    executionAsyncResource()[sym] = req;
}
export function getCurrentRequest() {
    return executionAsyncResource()[sym] ?? null;
}
//# sourceMappingURL=mod.js.map